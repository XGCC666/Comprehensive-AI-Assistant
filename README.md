# 🤖 多角色AI助手（桌面版）

一个功能强大、隐私优先的本地 AI 助手客户端。基于 Python + Flask 构建，拥有现代化的图形界面，支持所有兼容 OpenAI 接口的大模型（如 DeepSeek, GPT-4, Claude 等）。

> [!WARNING]
> 该应用还在更新中，有什么新功能或者要求可以私信作者

> [!CAUTION]
> **安全警告**：请勿将生成的 `.env` 文件或包含 API Key 的截图上传到任何公开平台（如 GitHub、论坛等平台）。你的 Key 相当于你的钱包！


## ✨ 核心功能 (Key Features)

### 🎨 现代化交互体验
* **Web 图形界面**：仿主流 AI 产品的极简设计，响应迅速。
* **外观定制**：支持**深色/浅色模式**一键切换，可自由调节**字体大小**。
* **个性化设置**：用户可自定义自己和 AI 的**昵称**与**头像**。

### 🔌 强大的模型支持
* **通用接口**：支持任何 OpenAI 兼容的 API (Base URL + API Key)。
* **一键获取**：在设置里填好 Key 后，点击“获取”按钮即可**自动拉取服务器支持的所有模型列表**，无需手动输入。
* **参数微调**：
    * **温度 (Temperature)**：拖拽滑块控制回复的随机性。
    * **最大长度 (Max Tokens)**：控制生成的长短。
    * **流式传输 (Stream)**：支持打字机效果，实时显示生成内容。

### 📝 完美的内容渲染
* **Markdown 支持**：完美渲染公式、表格、列表和粗体文本。
* **代码高亮**：内置 highlight.js，自动识别编程语言并高亮显示（深色/浅色模式下均清晰可见）。

### 🗂️ 对话管理
* **自动保存**：所有聊天记录以 JSON 格式存储在本地 `history/` 文件夹。
* **智能标题**：根据第一轮对话内容自动生成简短标题。
* **管理功能**：支持对历史记录进行**重命名**和**删除**操作。

### 🎭 角色扮演 (Prompt System)
* 通过 `prompts/` 文件夹下的 `.md` 文件定义不同的 AI 人格（如“翻译官”、“代码专家”、“润色助手”）。
* 软件启动时自动读取并供用户选择。

---

## 📦 如何使用 (用户指南)

### 方式一：直接运行软件 (推荐)
1.  下载发布的 `.zip` 压缩包并解压。
2.  双击运行 **`AI助手.exe`**。
3.  程序会自动启动并打开浏览器窗口。
4.  **首次配置**：
    * 点击界面左下角的 **"⚙️ 设置"**。
    * 在 **"API 连接配置"** 中填入你的 API Key 和 URL。
    * 点击 **"🔄 获取"** 选择模型，然后点击 **"💾 保存并连接"**。
5.  点击左上角的“新对话”，选择一个助手角色开始聊天！

### 方式二：从源码运行 (开发者)
如果你安装了 Python 环境，可以直接运行源码：

1.  **安装依赖**:
    ```bash
    pip install flask openai python-dotenv
    ```
2.  **启动服务**:
    ```bash
    python app.py
    ```
3.  **访问**:
    浏览器打开 `http://127.0.0.1:5000`

---

## 🛠️ 项目结构

```text
.
├── AI助手.exe            # 主程序
├── prompts/              # [配置] 存放角色提示词 (.md 文件)
├── history/              # [数据] 存放聊天记录 (.json 文件, 自动生成)
├── .env                  # [配置] 存放 API Key (自动生成)
├── src/                  # 核心源代码目录
├── static/               # 前端资源 (CSS, JS)
└── templates/            # 前端页面 (HTML)

```
## 🚀 如何打包 (Build)
如果你想自己编译 .exe 文件，请安装 pyinstaller 并执行以下命令：

```Bash

pyinstaller --name="AI助手" --onefile --add-data "templates;templates" --add-data "static;static" --add-data "src;src" app.py
```
打包完成后，请务必将**AI助手.exe** 与 **prompts文件夹**放在同一级目录下运行。

---

# ⚖️ 软件许可及服务协议 (Master Terms of Service & EULA)

**版本号**：25.12.3
**生效日期**：用户访问或使用之日起即刻生效
**主要管辖法**：中华人民共和国法律（兼顾国际出口管制合规）

---

## ⚠️ 重要提示 (PREAMBLE & WARNING)

**【审慎阅读】** 您（以下称“用户”）在下载、安装、复制、修改或以任何方式使用本软件（以下称“本标的物”）之前，请务必仔细阅读本协议。**特别是以粗体/下划线标识的条款，这些条款包含免除或者限制开发者责任、争议解决方式及管辖的重大内容。**

**【默认缔约】** 一旦您获取本标的物（包括但不限于克隆代码库、下载压缩包、运行脚本），即视为您已阅读并同意签署本协议。**如果您不同意本协议的任何内容，您应立即停止使用，并销毁本标的物的所有副本。**

---

### 第一条：定义与解释 (Definitions)
1.1 **“开发者”**：指本标的物的初始创建者、后续贡献者（Contributors）、维护者及相关关联方。

1.2 **“本标的物”**：指由开发者提供的软件源代码、二进制文件、文档、界面设计、API 接口封装及后续所有的更新版本。

1.3 **“第三方服务”**：指本标的物在运行过程中可能调用的、非开发者控制的第三方技术服务（包括但不限于 OpenAI、Anthropic、DeepSeek、HuggingFace 等大模型 API）。

1.4 **“生成内容”**：指用户通过本标的物输入指令（Prompt）后，由底层模型输出的任何文本、代码、图像或数据。

### 第二条：许可授权与边界 (License Grant & Restrictions)
2.1 **有限许可**：开发者授予用户一项个人的、不可转让的、非独占的、可撤销的有限许可，仅用于**非商业性质的学术研究、安全测试或个人学习**。

2.2 **商业禁令**：未经开发者书面授权，**严禁**以下行为：
    * 将本标的物（或其修改版）打包出售或作为付费服务的一部分。
    * 将本标的物部署于企业生产环境（Production Environment）用于商业运营。
    * 利用本标的物进行间接盈利（如通过提供免费服务进行广告引流）。
    
2.3 **禁止反向工程**：除非法律明确允许，否则用户不得对本标的物进行反向工程、反向编译、反汇编，或试图破解本标的物的任何加密/安全措施。

2.4 **禁止竞争性使用**：用户不得利用本标的物的源代码或逻辑架构，开发与本标的物存在直接竞争关系的产品或服务（SaaS 封装等）。

2.5 **权利保留**：本协议未明示授予的一切权利，均由开发者保留。

### 第三条：🛡️ AI 特定风险与算法黑箱抗辩 (AI Specific Risk & Disclaimer)
**鉴于生成式 AI 技术的特殊性，开发者作出如下特别声明，用户对此表示充分理解并接受：**

3.1 **不可控性声明 (The "Black Box" Defense)**：
本标的物仅为“连接器”或“客户端”工具。**生成内容完全由第三方模型决定，开发者无法控制、无法预测、亦无法审查生成内容。** 任何因模型“幻觉”（Hallucination）、逻辑错误或偏见导致的后果，与开发者无关。

3.2 **诱导攻击责任自负**：
若用户利用“提示词工程”（Prompt Engineering）技术（包括但不限于 DAN 模式、角色扮演、逻辑嵌套）绕过第三方模型的安全过滤机制，**此行为属于用户的主观恶意行为**。因此产生的一切账号封禁、API 停用或法律追责，由用户独立承担。

3.3 **非专业建议**：
本标的物输出的内容**绝对不构成**任何形式的法律意见、医疗诊断、投资建议或工程指导。用户若将 AI 生成的代码或方案直接部署于生产环境，造成的数据丢失或财产损失，开发者概不负责。

### 第四条：🚫 合规义务与禁止行为 (Compliance & Prohibited Conduct)
**用户承诺严格遵守以下规定。违反本条任一款均视为“根本违约”，开发者有权立即终止许可并向有关部门举报：**

4.1 **中国法律合规**：
* 严禁利用本标的物生成、传播违反《网络安全法》、《数据安全法》、《互联网信息服务深度合成管理规定》的内容。
* 严禁生成危害国家安全、颠覆国家政权、宣扬恐怖主义或破坏民族团结的信息。

4.2 **国际制裁与出口管制 (Export Control)**：
* 用户承诺不属于美国 EAR（出口管理条例）实体清单、SDN 清单或中国商务部不可靠实体清单中的对象。
* 用户不得将本标的物用于核武器、生化武器、导弹技术的研发。

4.3 **网络安全红线**：
* **严禁**利用本标的物编写恶意软件（Malware）、勒索病毒、钓鱼网站脚本。
* **严禁**对第三方服务器发起 DDoS 攻击、SQL 注入或漏洞扫描。

### 第五条：数据隐私与密钥安全 (Data Privacy & Key Security)
5.1 **无数据留存**：开发者声明，本标的物（本地部署版）默认不在开发者服务器上存储用户的聊天记录。

5.2 **密钥保管责任**：
**用户需自行保管其 API Key（密钥）。** 因用户保管不当（如将含有 Key 的代码上传至 GitHub 公开仓库、未加密存储等）导致 Key 被盗刷、额度损失或账户被封，**一切损失由用户自行承担，开发者不承担任何协助找回或赔偿义务。**

5.3 **第三方传输风险**：
用户知悉，在使用本标的物时，用户的输入数据（Input）将直接发送至第三方模型服务商。**用户应当自行阅读并评估第三方服务商的隐私协议。开发者不对第三方服务商的数据泄露负责。**

5.4 **敏感信息禁令**：
用户**不得**在对话框中输入任何真实且未脱敏的个人隐私信息（PII）、商业机密或国家秘密。

### 第六条：免责声明与责任限制 (Limitation of Liability)
**【核心防御条款 - 请逐字阅读】**

6.1 **“按原样”提供 (AS IS)**：
本标的物按“现状”和“可获得”的状态提供。开发者**不提供任何明示或默示的担保**，包括但不限于适销性、特定用途适用性、无病毒、无错误的担保。

6.2 **间接损失免责**：
**在法律允许的最大范围内，开发者不对因使用或无法使用本标的物而导致的任何间接、附带、特殊、惩罚性或后果性的损害（包括利润损失、数据丢失、业务中断）承担责任，即使开发者已被告知该等损害的可能性。**

6.3 **赔偿上限 (Liability Cap)**：
若法院判定开发者必须承担责任，用户同意：开发者对用户的全部赔偿责任总额，**仅限于用户为获取本标的物向开发者支付的实际金额（若本标的物为免费提供，则赔偿上限为人民币 1.00 元）。**

### 第七条：赔偿机制 (Indemnification)
用户同意，若因以下原因导致开发者及其关联方遭受任何索赔、诉讼、损失或费用（包括律师费），用户将进行全额赔偿并使开发者免受损害：
1. 用户违反本协议的任何条款；
2. 用户侵犯了第三方的知识产权、隐私权或其他合法权益；
3. 用户利用本标的物生成的违法内容导致行政处罚。

### 第八条：协议终止 (Termination)
8.1 **自动终止**：若用户违反本协议任一条款，本许可将自动终止，无需开发者另行通知。

8.2 **终止后义务**：协议终止后，用户必须立即停止使用本标的物，并永久删除所有副本及相关缓存文件。

### 第九条：法律管辖与争议解决 (Governing Law & Jurisdiction)
9.1 **管辖法律**：本协议之订立、生效、解释、修订、补充、终止、执行与争议解决均适用**中华人民共和国大陆地区法律**。

9.2 **争议解决**：
凡因本协议引起的或与本协议有关的任何争议，均应提交至作者所在地有管辖权的人民法院提起诉讼。

### 第十条：其他 (Miscellaneous)
10.1 **可分割性**：若本协议的任何条款被认定为无效或不可执行，不影响其他条款的效力。

10.2 **协议更新**：开发者有权随时更新本协议。更新后的协议将公布在项目主页，用户继续使用即视为接受更新。

10.3 **完整协议**：本协议构成双方关于本标的物的完整协议，取代此前所有的口头或书面约定。

---
